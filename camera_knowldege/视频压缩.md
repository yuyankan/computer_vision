## H.264，也被称为 AVC（Advanced Video Coding），之所以能实现高压缩率，主要因为它聪明地利用了视频画面中的两种“冗余”（redundancy）：时间冗余和空间冗余。简单来说，它只记录画面中改变的部分，而不是每一帧都完整地记录。

## 1. 时间冗余（Temporal Redundancy）
这是 H.264 最核心的压缩原理。在视频中，相邻的帧（frame）之间，画面大部分内容通常是保持不变的。例如，一个静止的背景，或者一个缓慢移动的物体。H.264 利用这一点，将帧分为三种类型：

I 帧 (Intra-coded picture)：也叫关键帧。它是一个完整的、独立的图像，不依赖于其他帧。当视频开始录制或场景发生巨大变化时，会生成 I 帧。你可以把它看作是一个“参考点”，是视频流中的一个完整画面快照。

P 帧 (Predictive-coded picture)：预测帧。P 帧记录的不是完整的画面，而是与前一个 I 帧或 P 帧的“差异”。编码器会分析 P 帧和它前一帧之间的运动，只记录移动的物体、新出现的画面等改变的部分。

B 帧 (Bi-directional predictive-coded picture)：双向预测帧。B 帧比 P 帧更进一步，它不仅参考前一帧，还会参考后一帧。通过前后帧的对比，B 帧可以更精确地预测画面的变化，从而实现更高的压缩率。

这个过程就像是你写日记：

I 帧：你写下今天的完整日记，从头到尾。

P 帧：第二天，你只写下今天和昨天“发生了什么不同”的事情。

B 帧：第三天，你不仅参考昨天发生的事，还预先考虑明天可能会发生的事，从而更高效地总结今天。

## 2. 空间冗余（Spatial Redundancy）
除了帧与帧之间的差异，H.264 还会对单帧画面内部进行压缩，这就是空间冗余。它利用了图像中相邻像素之间通常相似的特点。

H.264 会将每一帧画面分割成一个个小的宏块（macroblock）。对于每个宏块，它会进行以下操作：

色彩采样：H.264 不会存储每个像素完整的 RGB（红绿蓝）信息，而是采用一种叫做 YUV 的色彩模型。其中 Y 代表亮度，UV 代表色度。由于人眼对亮度变化比色度变化更敏感，H.264 可以减少色度信息，从而在不明显影响视觉质量的前提下，减小数据量。

变换与量化：它会使用数学算法（如离散余弦变换）将图像数据从空间域转换到频率域，然后丢弃那些人眼不敏感的高频信息，只保留对画面至关重要的低频信息。

## 3. 总结
H.264 的核心原理可以概括为：

## 分组编码：
将视频帧分为 I、P、B 三种类型，利用时间上的相似性进行压缩。

## 块编码：
将每一帧画面分割成宏块，在块内进行空间压缩，丢弃人眼不敏感的细节。

通过这两种方式的结合，H.264 能够在保证视觉质量的同时，实现比旧标准（如 MPEG-2）高得多的压缩效率，这也是它成为当今视频流媒体和监控领域主流标准的原因。
